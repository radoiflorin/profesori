<!doctype html>
<html lang="ro" data-theme="school">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin Scoala | Adauga ora in orar</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Literata:wght@400;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/css/app.css" rel="stylesheet">
  <link href="../assets/css/themes/theme-school.css" rel="stylesheet">
  <link href="../assets/css/themes/theme-corporate.css" rel="stylesheet">
  <link href="../assets/css/themes/theme-dark.css" rel="stylesheet">
</head>
<body data-page="timetable" data-base="../" data-sidebar-title="Orar actualizat" data-sidebar-body="Ultima modificare: azi, 08:10." data-sidebar-badge-text="Fara conflicte" data-sidebar-badge-class="success" data-sidebar-badge-icon="bi-check-circle" data-topbar-title="Adauga ora" data-topbar-subtitle="Introdu o noua ora in orar" data-topbar-search="Cauta clasa" data-topbar-cta="Salveaza" data-topbar-avatar="RA" data-footer-text="Copyright 2026 Admin Scoala. Toate drepturile rezervate.">
  <div class="app-shell">
    <aside class="sidebar">
  <div class="sidebar-header">
    <a class="brand" href="../index.html">
      <div class="brand-mark">S</div>
      <div>
        <div class="brand-title">Admin Scoala</div>
        <div class="brand-subtitle">Dashboard</div>
      </div>
    </a>
    <button class="btn btn-light btn-icon d-lg-none" data-sidebar-toggle type="button" aria-label="Deschide meniul">
      <i class="bi bi-list"></i>
    </button>
  </div>
  <div class="sidebar-search">
    <input class="form-control" type="text" placeholder="Cauta elev, clasa, profesor" aria-label="Cauta in scoala">
  </div>
  <nav class="sidebar-nav">
    <a class="nav-link" data-page="dashboard" href="../index.html"><i class="bi bi-speedometer2"></i>Dashboard</a>
    <a class="nav-link" data-page="students" href="../pages/students.html"><i class="bi bi-people"></i>Elevi</a>
    <a class="nav-link" data-page="student-detail" href="../pages/student-detail.html"><i class="bi bi-person-badge"></i>Detaliu elev</a>
    <a class="nav-link" data-page="teachers" href="../pages/teachers.html"><i class="bi bi-mortarboard"></i>Profesori</a>
    <a class="nav-link" data-page="classes" href="../pages/classes.html"><i class="bi bi-grid"></i>Clase</a>
    <a class="nav-link" data-page="timetable" href="../pages/timetable.html"><i class="bi bi-calendar3"></i>Orar</a>
    <a class="nav-link" data-page="grades" href="../pages/grades.html"><i class="bi bi-bar-chart"></i>Note</a>
    <a class="nav-link" data-page="attendance" href="../pages/attendance.html"><i class="bi bi-check2-square"></i>Prezenta</a>
    <a class="nav-link" data-page="messages" href="../pages/messages.html"><i class="bi bi-chat-dots"></i>Mesaje</a>
    <a class="nav-link" data-page="calendar" href="../pages/calendar.html"><i class="bi bi-calendar-event"></i>Calendar</a>
    <a class="nav-link" data-page="settings" href="../pages/settings.html"><i class="bi bi-gear"></i>Setari</a>
    <a class="nav-link" data-page="login" href="../pages/login.html"><i class="bi bi-person"></i>Autentificare</a>
    <a class="nav-link" data-page="not-found" href="../pages/404.html"><i class="bi bi-exclamation-triangle"></i>404</a>
  </nav>
  <div class="sidebar-card">
    <h6 data-sidebar-title>Orar actualizat</h6>
    <p class="mb-2" data-sidebar-body>Ultima modificare: azi, 08:10.</p>
    <div class="badge-soft success" data-sidebar-badge>
      <i class="bi bi-check-circle" data-sidebar-badge-icon></i>
      <span data-sidebar-badge-text>Fara conflicte</span>
    </div>
  </div>
</aside>


    <div class="app-main">
      <header class="topbar">
  <div class="topbar-row">
    <div class="topbar-title">
      <h1 data-topbar-title>Adauga ora</h1>
      <span data-topbar-subtitle>Introdu o noua ora in orar</span>
    </div>
    <div class="topbar-user">
      <div class="topbar-menu">
        <button class="btn btn-light btn-icon" type="button" data-menu-toggle="chat" aria-label="Deschide chat">
          <i class="bi bi-chat-dots"></i>
        </button>
        <div class="topbar-dropdown" data-menu="chat">
          <div class="topbar-dropdown-header">
            <div>
              <strong>Mesaje</strong>
              <div class="text-muted small">3 noi</div>
            </div>
            <a class="btn btn-sm btn-outline-primary" href="../pages/messages.html">Vezi tot</a>
          </div>
          <div class="topbar-dropdown-body">
            <div class="topbar-item">
              <div>
                <strong>Secretariat</strong>
                <div class="text-muted small">Documente bursa sociala</div>
              </div>
              <span class="badge-soft warning">Nou</span>
            </div>
            <div class="topbar-item">
              <div>
                <strong>Diriginte 10B</strong>
                <div class="text-muted small">Absente repetate elevi</div>
              </div>
              <span class="badge-soft danger">Urgent</span>
            </div>
            <div class="topbar-item">
              <div>
                <strong>Prof. Biologie</strong>
                <div class="text-muted small">Propunere proiect</div>
              </div>
              <span class="badge-soft success">Rezolvat</span>
            </div>
          </div>
          <div class="topbar-dropdown-footer">
            <button class="btn btn-primary w-100" type="button">Compune mesaj</button>
          </div>
        </div>
      </div>
      <select class="form-select form-select-sm" id="theme-select" aria-label="Schimba tema">
        <option value="school">School</option>
        <option value="corporate">Corporate</option>
        <option value="dark">Dark</option>
      </select>
      <a class="btn btn-light btn-sm lang-toggle" data-lang-toggle href="#" aria-label="Schimba in engleza">EN</a>
      <div class="topbar-menu">
        <button class="avatar" type="button" data-menu-toggle="user" aria-label="Meniu utilizator" data-topbar-avatar>RA</button>
        <div class="topbar-dropdown" data-menu="user">
          <div class="topbar-dropdown-header">
            <div>
              <strong>Administrator</strong>
              <div class="text-muted small">admin@scoala.ro</div>
            </div>
          </div>
          <div class="topbar-dropdown-body">
            <a class="topbar-link" href="../pages/settings.html"><i class="bi bi-gear"></i>Setari cont</a>
            <a class="topbar-link" href="../pages/teacher-detail.html"><i class="bi bi-person-badge"></i>Profilul meu</a>
            <a class="topbar-link" href="../pages/attendance.html"><i class="bi bi-check2-square"></i>Validari absente</a>
          </div>
          <div class="topbar-dropdown-footer">
            <a class="btn btn-outline-danger w-100" href="../pages/login.html">Delogare</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


      <main class="content container-fluid">
        <div class="page-toolbar">
  <div class="inline-search">
    <i class="bi bi-search"></i>
    <input class="form-control" type="text" data-topbar-search placeholder="Cauta clasa" aria-label="Cauta clasa">
  </div>
  <button class="btn btn-primary btn-sm" onclick="saveTimetable()">Salveaza</button>
</div>

        <div class="row g-4">
          <div class="col-lg-7">
            <div class="app-card p-4">
              <h5 class="mb-3">Detalii ora</h5>
              <form id="timetable-form" class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Profesor *</label>
                  <select id="timetable-teacher" class="form-select" required>
                    <option value="">-- Selecteaza profesor --</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Ziua *</label>
                  <select id="timetable-day" class="form-select" required>
                    <option value="">-- Selecteaza --</option>
                    <option value="Luni">Luni</option>
                    <option value="Marti">Marti</option>
                    <option value="Miercuri">Miercuri</option>
                    <option value="Joi">Joi</option>
                    <option value="Vineri">Vineri</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Inceput ora (HH:MM) *</label>
                  <input id="timetable-start" class="form-control" type="time" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Sfarsit ora (HH:MM) *</label>
                  <input id="timetable-end" class="form-control" type="time" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Clasa</label>
                  <input id="timetable-class" class="form-control" type="text" placeholder="Ex: 10A">
                </div>
                <div class="col-md-6">
                  <label class="form-label">Sala</label>
                  <input id="timetable-room" class="form-control" type="text" placeholder="Ex: Sala 12">
                </div>
              </form>
            </div>
          </div>
          <div class="col-lg-5">
            <div class="app-card p-4">
              <h5 class="mb-3">Actiuni</h5>
              <div class="d-grid gap-3">
                <div class="alert alert-info small" role="alert">
                  <i class="bi bi-info-circle"></i>
                  Completeaza campurile obligatorii (*) si salveaza ora in orar.
                </div>
                <div class="d-flex gap-2">
                  <a class="btn btn-outline-secondary w-100" href="timetable.html">Anuleaza</a>
                  <button class="btn btn-primary w-100" type="button" onclick="saveTimetable()">Salveaza</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <footer class="app-footer" data-footer-text>Copyright 2026 Admin Scoala. Toate drepturile rezervate.</footer>

    </div>
  </div>
  <div class="sidebar-overlay"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/theme.js"></script>
  <script src="../assets/js/app.js"></script>
  <script src="../assets/js/api-integration.js"></script>
  <script>
    // Load teachers dropdown
    window.addEventListener('load', async () => {
      const teachers = await ApiIntegration.teachers.getAll();
      if (teachers) {
        const select = document.getElementById('timetable-teacher');
        teachers.forEach(teacher => {
          const option = document.createElement('option');
          option.value = teacher.id;
          option.textContent = `${teacher.name} - ${teacher.subject}`;
          select.appendChild(option);
        });
      }
    });

    // Save timetable function
    window.saveTimetable = async () => {
      const data = {
        teacher_id: parseInt(document.getElementById('timetable-teacher').value),
        day: document.getElementById('timetable-day').value,
        start_time: document.getElementById('timetable-start').value,
        end_time: document.getElementById('timetable-end').value,
        class: document.getElementById('timetable-class').value || null,
        room: document.getElementById('timetable-room').value || null
      };

      if (!data.teacher_id || !data.day || !data.start_time || !data.end_time) {
        alert('Completeaza campurile obligatorii (*)');
        return;
      }

      if (data.start_time >= data.end_time) {
        alert('Ora de sfarsit trebuie sa fie dupa ora de inceput!');
        return;
      }

      const result = await ApiIntegration.timetables.create(data);
      if (result) {
        alert('Ora adaugata la orar!');
        window.location.href = 'timetable.html';
      } else {
        alert('Eroare la adaugare!');
      }
    };
  </script>
</body>
</html>

